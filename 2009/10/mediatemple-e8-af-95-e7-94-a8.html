<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Mediatemple 试用 · Water is</title><meta name="description" content="Mediatemple 试用 - latteye"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://latteye.me/atom.xml" title="Water is"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Mediatemple 试用</h1><div class="post-info">2009年10月12日</div><div class="post-content"><p>  跟随着 <a href="http://imtx.cn" target="_blank" rel="external">imtx</a> <a href="http://imtx.cn/archives/1345.html" target="_blank" rel="external">的脚步</a>，我也一起开始尝试 <a href="mediatemple.net">Mediatemple</a> 。这可是我见过最贵的虚拟主机啊！天啊，每个月 20 美刀，要是我一个人就放个 Blog 的话，我是绝对不会租的。<br>  既然有幸接触了就认真看看吧。</p>
<a id="more"></a>
<p>  某些方面，MT 与 DH 有相似之处，我会时不时的拿 DH 比较一下的。</p>
<p><strong>1. 系统</strong></p>
<p>  与 DH 一样，MT 采用了 Debian 系统。 Kernel 的版本是 2.6.20.2mtv8，可能是基于 Debian 4 的系统。比 DH 要新一些。也是我比较喜欢的内核步伐，所谓步伐就是指“追新”的速度。HostMonster 的速度就太快了，一上来就是 2.6.28，恐怕现在更新了。</p>
<p><strong>2. 内存</strong></p>
<p>9G 的物理内存。<br>真是个相当诡异的数字！2Gx4 + 1G？ 3Gx3？ 当然，还有一种解释，他的机器本身就是虚拟化的。</p>
<p>Swap 华丽的采用了 0，基本上，不会有什么问题。其实如果有 swap 可能才会出问题。没有反而好。</p>
<p><strong>3. 网络架构</strong></p>
<p>3个网卡</p>
<p>eth0: 绑定了以 10 开头的内网地址。用于内部通讯的。<br>eth1: 绑定了一个外网地址。不确定干嘛用的。<br>lo: 绑定了大约 900 个外网地址，牛啊！实在是牛啊。DH 的机器也会绑定很多 ip 在 eth1 上。但根本不是这个量级的。</p>
<p>咦？为啥是 lo？哈哈！ipvs 呀！看来服务和性能都能得到保障呢。原来 MT 也是用的 ipvs，而且 DR 模式 比 NAT 模式效率要高了很多呢。</p>
<p><strong>4. 账户的管理</strong></p>
<p>既然有了 ipvs，虚拟主机一定要有统一的账户系统，最常用的应该是 NIS+NFS+autofs 了吧，果然，mount 一下就看见 NFS 了。</p>
<p><a href="http://latteye.com/wp-content/images/mt/mountnfs.PNG" target="_blank" rel="external"><img src="http://latteye.com/wp-content/images/mt/_mountnfs.PNG" alt=""></a></p>
<p><strong>5. 安全性</strong></p>
<p>通过一组命令，基本上确定了 MT 是虚拟化的主机，在虚拟化的同时，安全性也得到了保障。</p>
<blockquote>
<p>imtx.cn@n10:/sbin$ netstat -an</p>
<p>Active Internet connections (servers and established)</p>
<p>Proto Recv-Q Send-Q Local Address           Foreign Address         State</p>
<p>/proc/net/tcp: Permission denied</p>
<p>imtx.cn@n10:/sbin$ ps</p>
<p>  PID TTY          TIME CMD</p>
<p>24718 ttyp6    00:00:00 bash</p>
<p>32170 ttyp6    00:00:00 ps</p>
<p>imtx.cn@n10:/sbin$ ps -ef</p>
<p>UID        PID  PPID  C STIME TTY          TIME CMD</p>
<p>imtx.cn  24713 24137  0 06:48 ?        00:00:00 sshd: imtx.cn@ttyp6</p>
<p>imtx.cn  24718 24713  0 06:48 ttyp6    00:00:00 -bash</p>
<p>imtx.cn  32182 24718  0 07:08 ttyp6    00:00:00 ps -ef</p>
</blockquote>
<p>以上的分析基本是从系统角度的。下面从功能角度来看看 MT 的主机。</p>
<p><strong>6. SSL 支持</strong></p>
<p>没有想到 MT 居然默认就支持了 SSL：</p>
<p><a href="http://latteye.com/wp-content/images/mt/ssl.PNG" target="_blank" rel="external"><img src="http://latteye.com/wp-content/images/mt/_ssl.PNG" alt=""></a></p>
<p>这在其他主机商那里都是额外的收费服务啊！当然啦，基于如此高昂的价格，MT 默认支持也是应该的~哼哼~~</p>
<p><strong>7. PHP 与 数据库</strong></p>
<p>早期我读到一篇文章说，MT 只提供一个数据库。今天 TX 很明确的告诉我 MT 支持多个数据库，并且还支持 PostgreSQL，正是因为这样 MT 也越来越适合合租了。</p>
<p>PHP 也可以选择 4、5. 这基本属于标配了。</p>
<p><strong>8. DNS</strong></p>
<p>亮点！只说亮点！<br>MT 的 DNS 配置还支持 TXT 记录，非常适合做 email 的用户。国内的 dnspod 好像还不支持呢。</p>
<p><strong>9.GPU</strong></p>
<p>MT 给自己取了个新名字 GPU，这是啥呢？其实就是 CPU 占用率，但按照 MT 自己的说法，不止是 CPU，还包括了磁盘 I/O 等一系列东西。<br>其实基本就是 CPU 啦。<br>MT 既然用了集群系统，计算 CPU 使用量自然成了问题，也不知道他是通过什么方式统计的。比较方便的方法是监控前端 ipvs 入站连接数吧。<br>或者是 snmp？<br>总之，MT 自己说，只要你是正常人，我们默认提供的一定是足够你做网站的。<br><em>provide 99.7% of all customers with enough resources</em><br>我真希望有一天我是那 0.3% 啊！</p>
<p>好了，第一篇粗略的试用报告就这样了，接下来我争取早日把 gitweb 在上面搭建起来。</p>
</div></article></div></main><footer><div class="paginator"><a href="/2009/11/e5-85-88-nat-ef-bc-9f-e5-85-88-e8-b7-af-e7-94-b1-ef-bc-9f.html" class="prev">PREV</a><a href="/2009/10/how-many-open-files.html" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://latteye.me">latteye</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>