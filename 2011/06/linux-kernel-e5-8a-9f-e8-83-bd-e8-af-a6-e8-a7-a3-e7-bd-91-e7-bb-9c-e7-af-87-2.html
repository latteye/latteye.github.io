<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Linux Kernel 功能详解-网络篇-2 · Water is</title><meta name="description" content="Linux Kernel 功能详解-网络篇-2 - latteye"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://latteye.me/atom.xml" title="Water is"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Linux Kernel 功能详解-网络篇-2</h1><div class="post-info">2011年6月20日</div><div class="post-content"><p><strong>网络篇2 Unix Domain Sockets</strong><br>Networking support—&gt;Networking options—&gt;Unix domain sockets</p>
<p>Unix Domain Sockets 是一种 IPC （Interprocess communication），他处理本机的进程与进程的通讯。如果要处理不同机器之间的通讯，可以看看<a href="http://osr507doc.sco.com/en/netguide/disockN.inet_sockets_intro.html" target="_blank" rel="external">这篇文章</a>。<br><a id="more"></a><br>使用 netstat 就可以查看系统上活动的 Unix Domain Sockets：</p>
<blockquote>
<p>Active Internet connections (w/o servers)</p>
<p>Proto Recv-Q Send-Q Local Address           Foreign Address         State      </p>
<p>tcp        0      0 10.12.32.47:42855       75.119.223.251:22       ESTABLISHED </p>
<p>tcp        0      0 10.12.32.47:40210       65.55.254.45:80         ESTABLISHED </p>
<p>tcp        0      0 10.12.32.47:33417       207.46.124.85:1863      ESTABLISHED </p>
<p>tcp        0      0 10.12.32.47:58719       114.86.55.242:8522      ESTABLISHED </p>
<p>tcp        0      0 10.12.32.47:42775       123.125.41.48:80        ESTABLISHED </p>
<p>tcp        0      0 10.12.32.47:35861       72.14.213.100:80        ESTABLISHED </p>
<p>tcp        0      0 10.12.32.47:59378       211.229.86.113:1853     ESTABLISHED </p>
<p>tcp        0      0 10.12.32.47:53624       10.12.25.230:3389       ESTABLISHED </p>
<p>tcp        0      0 10.12.32.47:52854       110.75.127.230:80       ESTABLISHED </p>
<p>tcp        0      0 10.12.32.47:56020       72.14.203.139:80        ESTABLISHED </p>
<p>tcp        0   2807 10.12.32.47:42246       74.125.71.113:443       ESTABLISHED </p>
<p>tcp        0      0 10.12.32.47:53775       74.125.71.19:443        ESTABLISHED </p>
<p>Active UNIX domain sockets (w/o servers)</p>
<p>Proto RefCnt Flags       Type       State         I-Node Path</p>
<p>unix  2      [ ]         DGRAM                    8450   @/org/freedesktop/hal/udev_event</p>
<p>unix  12     [ ]         DGRAM                    8173   /dev/log</p>
<p>unix  3      [ ]         STREAM     CONNECTED     109052 /home/skyyuan/.pulse/97b2ce15702ce8dde39a816f00000578-runtime/native</p>
<p>unix  3      [ ]         STREAM     CONNECTED     111645 </p>
<p>unix  3      [ ]         STREAM     CONNECTED     107350 @/tmp/.X11-unix/X0</p>
<p>unix  3      [ ]         STREAM     CONNECTED     102043 </p>
<p>unix  3      [ ]         STREAM     CONNECTED     108088 </p>
<p>unix  3      [ ]         STREAM     CONNECTED     108087 </p>
<p>unix  3      [ ]         STREAM     CONNECTED     102038 </p>
<p>unix  3      [ ]         STREAM     CONNECTED     102037 </p>
<p>unix  3      [ ]         STREAM     CONNECTED     107771 @/tmp/dbus-9XShD81SBH</p>
<p>unix  3      [ ]         STREAM     CONNECTED     107195 </p>
<p>unix  3      [ ]         STREAM     CONNECTED     97279  @/tmp/dbus-u41v47jGZD</p>
</blockquote>
<p>一个 Socket 具有一种类型。并且与一个或者多个进程相关。不同进程只会与相同的 Sockets 进行沟通。<br>来看看Socket的两种类型：Stream 和 Datagram。</p>
<p><strong>Stream</strong>:Stream 类型 (SOCK_STREAM) 是最常用的类型. 它提供了全双工、有序的、不重复的且无边界的数据流（without boundaries）除了双向数据流，一对 Stream Sockets 链接还为管道(pipes)提供了一个类似的界面。( Except for the bidirectionality of data flow, a pair of connected stream sockets provides an interface analogous to that of pipes. )</p>
<p><strong>Datagram</strong>: Datagram Socket (SOCK_DGRAM) 支持在网络层面为 datagram 数据类型提供双向数据流。同时支持边界的记录（Record boundaries are preserved） Since the transport layer is unreliable, the processes themselves must be responsible for reliability assurance. For example, the receiving process may need to perform resequencing and elimination of duplicates. The datagram socket can be used in applications where reliability of an individual packet is not essential, for example, in broadcasting messages for the purpose of updating a status table. </p>
<p><em>找到的这两段资料，但是由于这部分内容涉及很多的开发相关内容，超出我的知识范围，所以不再翻译了。</em></p>
<p>Unix Domain Socket 是从 Socket 通讯而来，但由于不需要像网络传输考虑不稳定的问题，所以剔除了很多功能：打包拆包，计算校验和，维护序列号等等。从而达到更高的效率。而以上两种类型：面向数据流与面向数据包类似于 TCP/UDP 的概念。但总的来说 Unix Domain Socket 是可靠的。<br>Unix Domian Socket 与网络 Socket 最大的不同是地址格式不同。网络用 ip 端口来表示。Unix Domian Socket 用文件系统地址来表示，它是一个 Socket 类型文件在系统中的位置。</p>
<p>如有错误，欢迎来信指正：<br><img src="http://latteye.com/gmail.png" alt=""></p>
</div></article></div></main><footer><div class="paginator"><a href="/2011/06/e4-b9-85-e8-bf-9d-e7-9a-84-e5-81-87-e6-9c-9f.html" class="prev">PREV</a><a href="/2011/06/linux-kernel-e5-8a-9f-e8-83-bd-e8-af-a6-e8-a7-a3-e7-bd-91-e7-bb-9c-e7-af-87-1.html" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://latteye.me">latteye</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>