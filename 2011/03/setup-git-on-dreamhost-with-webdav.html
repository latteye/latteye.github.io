<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 在 DreamHost 上设置基于 WebDav 的 Git 仓库 · Water is</title><meta name="description" content="在 DreamHost 上设置基于 WebDav 的 Git 仓库 - latteye"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://latteye.me/atom.xml" title="Water is"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">在 DreamHost 上设置基于 WebDav 的 Git 仓库</h1><div class="post-info">2011年3月10日</div><div class="post-content"><p>之前在HostMonster设置过 Git，后来HostMonster关闭了WebDav的支持，于是作罢。现在发现 DreamHost 明确支持WebDav，虽然官方并不支持Git仓库，却也在Wiki中鼓励你搭建。<a id="more"></a></p>
<p>在我的服务器上 git 版本还蛮新的：</p>
<blockquote>
<p>[amsterdam]$ git –version</p>
<p>git version 1.7.1.1</p>
</blockquote>
<p>如果你的服务器没有预装 git，可以自己编译安装。</p>
<p><strong>1. 在DH服务器创建一个 WebDav </strong></p>
<p>Goodies –&gt;&gt; HTaccess/WebDav –&gt;&gt; 选择你的域名 –&gt;&gt;<br><a href="http://latteye.com/wp-content/gallery/forblog/dhwebdav.png" target="_blank" rel="external"><img src="http://latteye.com/wp-content/gallery/forblog/thumbs/thumbs_dhwebdav.png" alt="dhwebdav"></a></p>
<p>既然是 WebDav 当然支持用户/密码。</p>
<p>注意！不要在 wordpress 子目录创建 webdav 目录。这样默认会由 wordpress 返回一个 404 错误页面。</p>
<p><strong>2. 在本地创建一个空的 git 仓库</strong></p>
<blockquote>
<p>mkdir blank.git</p>
<p>cd blank.git/</p>
<p>git –bare init</p>
<p>Initialized empty Git repository in /home/carlos/dev/blank.git/</p>
<p>touch git-daemon-export-ok</p>
<p>git –bare update-server-info</p>
<p>mv hooks/post-update.sample hooks/post-update</p>
</blockquote>
<p><strong>3. 将远程的 WebDav 目录挂载到本地并拷贝本地仓库到 WebDav</strong></p>
<p>Gnome 也有提供方便的连接方式。但我使用了 <a href="http://linux.die.net/man/8/mount.davfs" target="_blank" rel="external">davfs2</a>.</p>
<p>fstab 中添加一行</p>
<blockquote>
<p><a href="http://git.latteye.com/git" target="_blank" rel="external">http://git.latteye.com/git</a> /media/git davfs uid=skyyuan  0 0</p>
</blockquote>
<p>在 davfs2 密码文件中添加一行 /etc/davfs2/secrets</p>
<blockquote>
<p><a href="http://git.latteye.com/git" target="_blank" rel="external">http://git.latteye.com/git</a>   username        password</p>
</blockquote>
<p>然后 cp 本地仓库到远程即可</p>
<p><strong>4. Git Clone 工作了</strong></p>
<blockquote>
<p>git clone <a href="http://latteye@git.latteye.com/git/blank.git" target="_blank" rel="external">http://latteye@git.latteye.com/git/blank.git</a></p>
</blockquote>
<p><strong>5. 自动输入密码</strong><br>如果你希望自动输入密码，在 ~/.netrc 里面写入对应的密码即可</p>
<blockquote>
<p>echo “machine www.example.com login latteye password mypw” &gt;&gt; ~/.netrc</p>
</blockquote>
<p>应该还可以创建出 Git 的网页。改天再尝试一下。</p>
<p>参考文章：<a href="http://priodev.blogspot.com/2010/02/hosting-your-git-repository-on.html" target="_blank" rel="external">GIT on DreamHost</a>，<a href="http://wiki.dreamhost.com/Git" target="_blank" rel="external">Dreamhost Wiki</a><br><a href="http://www.yupoo.com/photos/latteye/80135728/" title="gitdh" target="_blank" rel="external"><img src="http://pic.yupoo.com/latteye/AUh9z3gn/thumb.jpg" alt="gitdh"></a></p>
</div></article></div></main><footer><div class="paginator"><a href="/2011/03/astyle-1-0.html" class="prev">PREV</a><a href="/2011/03/flac-to-mp3-in-python.html" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://latteye.me">latteye</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>