<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Linksys WAG354G 无线配置探寻 一 · Water is</title><meta name="description" content="Linksys WAG354G 无线配置探寻 一 - latteye"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://latteye.me/atom.xml" title="Water is"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://www.zhihu.com/people/yuan-hao-yang" target="_blank" class="nav-list-link">ZHIHU</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Linksys WAG354G 无线配置探寻 一</h1><div class="post-info">2008年7月11日</div><div class="post-content"><p>Wifi 论坛上看到有人困惑于这款路由器的无线配置。我自己不用无线，所以之前也没有折腾过。<br>昨天从公司带了一个无线网卡回来，想尝试一下如何配置。没想到这一个尝试引发了一堆问题。</p>
<p>记录一下过程。</p>
<a id="more"></a>
<p><strong>1. OpenWRT wiki</strong></p>
<p>WIKI 上的配置写的并不复杂，英文过得去的看看<a href="http://wiki.openwrt.org/OpenWrtDocs/KamikazeConfiguration#head-5925c40dcc0fae0849dc007b29504868170a7fed" target="_blank" rel="external">这个章节</a>就可以了。<br>但我看到了这样一句话：</p>
<blockquote>
<p>config wifi-device     wifi device name</p>
<pre><code>option type     currently only broadcom and atheros
</code></pre></blockquote>
<p>那么 WAG354G 到底是不是 Broadcom 的无线芯片呢？</p>
<p>在 OpenWRT 的 <a href="http://wiki.openwrt.org/TableOfHardware" target="_blank" rel="external">Device 列表</a>里面，是这样介绍的：</p>
<blockquote>
<p>V2——TI TNETW1350A<br>V1——TI TNETW1130 ACX111</p>
</blockquote>
<p>同时又在 <a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Linksys/WAG354G?highlight=(CategoryAR7Device" target="_blank" rel="external">WAG354G 独立页面</a>)里面看到了：</p>
<blockquote>
<p>The wireless chipset needs a firmware. You can download some firmwares for the ACX111 chipset here. Choose one firmware binary (I used the last version) named tiacx111c16 and upload it in the /lib/firmware/ folder of your router.</p>
</blockquote>
<p>当时还没有仔细的看 Device 列表，以及自己路由器的芯片（后来仔细看过了，的确是TI TNETW1350A的）。于是就按照这篇说明下载了 ACX111 的 firmware 文件。结果放在 /lib/firmware/ 之后丝毫没有反应。</p>
<p>现在想想，如果是 V1 的机器应该就会反应了。所谓有反应就是能出现 wlan0 设备。</p>
<p>继续顺着 ACX 芯片的路走，在内核配置中找到了支持 acx 设备的选项。选中！编译！刷机！死翘……</p>
<p>其死亡症状和 Neup Openwrt 版本一模一样。终于知道为啥那个版本会刷死机器了。强加了一个不正常的模块，机器在开机的过程中应该卡住了。</p>
<p><strong>二、Neptune354 固件</strong></p>
<p>刷入之后无线部分无法正常工作。在 Neptune 系统中，eth0 似乎定义为了无线网卡。br0 定义为了交换芯片网卡。<br>尽管网页部分可以看到 Wireless 的设置内容。但怎么按都是没有反应的。</p>
<p>这里又花费了我半个小时的时间。</p>
<p><strong>三、 Linksys 官方固件</strong></p>
<p>1.01.58 可以在<a href="http://www.linksys.com/servlet/Satellite?c=L_Content_C1&amp;childpagename=US%2FLayout&amp;cid=1115416836002&amp;pagename=Linksys%2FCommon%2FVisitorWrapper" target="_blank" rel="external">这里找到源码</a>。可以在<a href="http://www-cn.linksys.com/servlet/Satellite?c=L_Download_C2&amp;childpagename=CN%2FLayout&amp;cid=1140648594323&amp;packedargs=sku%3D1175229540193&amp;pagename=Linksys%2FCommon%2FVisitorWrapper&amp;lid=9432353423B03" target="_blank" rel="external">这里下载Bin文件</a>（Linksys 中文化做得很棒）。</p>
<p>在刷了 1.01.58 之后无线部分完全正常，最明显的一个标识，Wireless 灯亮了。</p>
<p>其实 Neu 也是基于 Linksys 修改的，但为啥他不行呢？</p>
<p>版本！</p>
<p>Neu 的作者自己使用的是 V1 版本。<br>在 WAG354G 的源码页面并没有区分 V1 和V2 。但是实际上由于时间的早晚，各个版本的源码中包含的驱动是不同的。</p>
<p>Neu 编译的应该不是1.01.58版。早期的版本使用的是 acx 网卡。而Neu 作者给的 V2 版本固件，并没有考虑到这个问题。仅仅只是将 WA7A 和 WA3A 列了出来。尽管是两个固件，但他们是从一个源码出来的。</p>
<p><strong>四、型号</strong></p>
<p>说到底无线的问题就集中在一点了，到底是啥芯片呢？</p>
<p>我尝试搜索 “TI TNETW1350A”，第一次没啥结果。现在发现是“德州仪器”的。<br>但同时又很奇怪的在一个文件的源码里面看到了 “Broadcom” 的字样。</p>
<p>如果是 Broadcom 倒好解决了，如果是“德州仪器”就又要折腾了……</p>
<p>今晚休息，周六继续折腾无线部分。</p>
</div></article></div></main><footer><div class="paginator"><a href="/2008/07/multi-subnet-in-singel-netcard.html" class="prev">PREV</a><a href="/2008/07/cisco-3560g-e7-ab-af-e5-8f-a3-e9-95-9c-e5-83-8f.html" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://latteye.me">latteye</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>