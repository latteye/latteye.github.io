<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> openswan 补充 · Water is</title><meta name="description" content="openswan 补充 - latteye"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://latteye.me/atom.xml" title="Water is"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://www.zhihu.com/people/yuan-hao-yang" target="_blank" class="nav-list-link">ZHIHU</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">openswan 补充</h1><div class="post-info">2008年2月1日</div><div class="post-content"><p>几个月前<a href="http://latteye.com/2007/10/openswan-ipsec-vpn.html" target="_blank" rel="external">初步尝试了 Openswan</a>，但是在最后连接的时候出现了一些问题。所以实验暂停了。</p>
<p>前两天又重新使用 Debian 、Arch 模拟两个网关，重新做了实验，成功了。其思路与前文类似，在此对一些新发现的东西做记录、解释。<br><a id="more"></a></p>
<p><strong>1. Openswan 服务</strong></p>
<p>ipsec 的服务脚本有多个版本，Debian 包中自带的脚本版本较新，Arch 稍旧。不过使用上都没有问题。Openswan 的脚本其实就是调用 ipsec 的脚本。</p>
<p><strong>2. 关于 Opportunistic Encryption</strong></p>
<p>在 <a href="https://www.xfocus.net/bbs/index.php?act=SE&amp;f=2&amp;t=61988&amp;p=298113" target="_blank" rel="external">用OpenSWAN做Linux下的IPSec VPN的详细配置指南</a> 里面提到：</p>
<blockquote>
<p>另外，这一行</p>
<pre><code>include /etc/ipsec.d/examples/no_oe.conf意为关闭Opportunistic Encryption在你不知道她到底做了什么之前，还是关掉她为好，打开no_oe.conf文件，发现其内容如下，我们将在本文的第五部分讨论这个话题。
</code></pre></blockquote>
<p>在 Arch 的 ipsec.conf 文件里面，默认并没有关闭 OE，这导致我一旦启动了 Openswan 服务，网络接口就不生效了。那么 OE 到底是什么呢？加密方式？暂时还没搞清楚。</p>
<p><strong>3.Arch 下的一点小问题</strong></p>
<p>Arch 很优雅的把 /etc/ipsec.d/policies/clear 里面添加了许多网段，暂时只发现他们会在ipsec启动的时候添加许多路由信息，还不清楚具体的作用。</p>
<p><strong>接下来的实验：</strong></p>
<p>erjing 说过，相同的设备之间 ipsec 还不是很难。难是难在不同的设备之间如何配置 ipsec vpn 通道。<br>地下就想试试 linux-fortigate 之间的配置了。</p>
</div></article></div></main><footer><div class="paginator"><a href="/2008/02/use-openswan-to-connect-linux-fortigate-with-vpn.html" class="prev">PREV</a><a href="/2008/01/cappuccinopc3.html" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://latteye.me">latteye</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>